import hex_assem3x3
import numpy as np
import Shynt


np.set_printoptions(linewidth=np.inf)

# mc_params = Shynt.montecarlo.MontecarloParams(1500, 1000, 500) 
mc_params = Shynt.montecarlo.MontecarloParams(3_000, 3_000, 1_500) 

hex_assem3x3.root_universe.mcparams = mc_params
Shynt.run(
  hex_assem3x3.root_universe,
  serp_dir=f'serp_files_{mc_params.histories}_{mc_params.active_cycles}_{mc_params.unactive_cycles}', 
  name_out=f'{mc_params.histories}_{mc_params.active_cycles}_{mc_params.unactive_cycles}',
  run_serpent_files=True,
  run_RMM=True
)


surfaces = [
  193, 194, 195, 197, 
  199, 200, 201, 202, 
  205, 206, 207, 208, 
  212, 213, 214, 216, 
  220, 221, 223, 
  225, 226, 227, 228, 
  232, 233, 234, 235, 
  240, 241, 242, 243, 
  248, 249, 250, 251, 
  257, 258, 260, 
  264, 265, 267, 
  269, 270, 271, 272, 
  276, 277, 278, 279, 
  284, 285, 286, 287, 
  292, 293, 294, 295, 
  301, 302, 304, 
  307, 308, 309, 311, 
  313, 314, 315, 316, 
  319, 320, 321, 322, 
  326, 327, 328, 330
]

surfaces_indexes = {
  0: 193, 1: 194, 2: 195, 3: 197,
  4: 199, 5: 200, 6: 201, 7: 202,
  8: 205, 9: 206, 10: 207, 11: 208,
  12: 212, 13: 213, 14: 214, 15: 216,
  16: 220, 17: 221, 18: 223,
  19: 225, 20: 226, 21: 227, 22: 228,
  23: 232, 24: 233, 25: 234, 26: 235,
  27: 240, 28: 241, 29: 242, 30: 243,
  31: 248, 32: 249, 33: 250, 34: 251,
  35: 257, 36: 258, 37: 260,
  38: 264, 39: 265, 40: 267, 
  41: 269, 42: 270, 43: 271, 44: 272,
  45: 276, 46: 277, 47: 278, 48: 279,
  49: 284, 50: 285, 51: 286, 52: 287,
  53: 292, 54: 293, 55: 294, 56: 295,
  57: 301, 58: 302, 59: 304,
  60: 307, 61: 308, 62: 309, 63: 311,
  64: 313, 65: 314, 66: 315, 67: 316,
  68: 319, 69: 320, 70: 321, 71: 322,
  72: 326, 73: 327, 74: 328, 75: 330,
}

surfaces_indexes_inv = {
  193: 0, 194: 1, 195: 2, 197: 3,
  199: 4, 200: 5, 201: 6, 202: 7,
  205: 8, 206: 9, 207: 10, 208: 11,
  212: 12, 213: 13, 214: 14, 216: 15,
  220: 16, 221: 17, 223: 18,
  225: 19, 226: 20, 227: 21, 228: 22,
  232: 23, 233: 24, 234: 25, 235: 26,
  240: 27, 241: 28, 242: 29, 243: 30,
  248: 31, 249: 32, 250: 33, 251: 34,
  257: 35, 258: 36, 260: 37,
  264: 38, 265: 39, 267: 40,
  269: 41, 270: 42, 271: 43, 272: 44,
  276: 45, 277: 46, 278: 47, 279: 48,
  284: 49, 285: 50, 286: 51, 287: 52,
  292: 53, 293: 54, 294: 55, 295: 56,
  301: 57, 302: 58, 304: 59,
  307: 60, 308: 61, 309: 62, 311: 63,
  313: 64, 314: 65, 315: 66, 316: 67,
  319: 68, 320: 69, 321: 70, 322: 71,
  326: 72, 327: 73, 328: 74, 330: 75,
}

all_surfaces_area = {
  193: 0.32753, 194: 0.5672986, 195: 0.65506, 197: 0.6550599991313467, 
  199: 0.5672986, 200: 0.491295, 201: 0.5672986, 202: 0.491295, 
  205: 0.5672986, 206: 0.491295, 207: 0.5672986, 208: 0.491295, 
  212: 0.32752999999999993, 213: 0.5672986, 214: 0.65506, 216: 0.6550599991313467, 
  220: 0.8509479, 221: 0.49129500000000004, 223: 0.9825899986970201, 
  225: 0.8509479, 226: 0.65506, 227: 0.8509479, 228: 0.65506, 
  232: 0.8509479, 233: 0.491295, 234: 0.8509479, 235: 0.491295, 
  240: 0.8509479, 241: 0.491295, 242: 0.8509479, 243: 0.491295, 
  248: 0.8509479, 249: 0.65506, 250: 0.8509479, 251: 0.65506, 
  257: 0.8509479, 258: 0.49129500000000004, 260: 0.9825899986970201, 
  264: 0.8509479, 265: 0.49129500000000004, 267: 0.9825899986970201, 
  269: 0.8509479, 270: 0.65506, 271: 0.8509479, 272: 0.65506, 
  276: 0.8509479, 277: 0.491295, 278: 0.8509479, 279: 0.491295, 
  284: 0.8509479, 285: 0.491295, 286: 0.8509479, 287: 0.491295, 
  292: 0.8509479, 293: 0.65506, 294: 0.8509479, 295: 0.65506,
  301: 0.8509479, 302: 0.49129500000000004, 304: 0.9825899986970201, 
  307: 0.32753, 308: 0.5672986, 309: 0.65506, 311: 0.6550599991313467, 
  313: 0.5672986, 314: 0.491295, 315: 0.5672986, 316: 0.491295, 
  319: 0.5672986, 320: 0.491295, 321: 0.5672986, 322: 0.491295, 
  326: 0.32752999999999993, 327: 0.5672986, 328: 0.65506, 330: 0.6550599991313467
}

all_regions_order = [
  64, 65, 
  67, 68, 
  70, 71, 
  74, 75, 
  78, 79, 
  81, 82, 83, 
  85, 86, 87, 88, 
  90, 91, 92, 93, 
  95, 96, 97, 
  100, 101, 
  104, 105, 
  107, 108, 109, 
  111, 112, 113, 114, 
  116, 117, 118, 119, 
  121, 122, 123, 
  126, 127, 
  130, 131, 
  133, 134, 
  136, 137, 
  140, 141
]

all_regions_volume = {
  64: 0.17861275516015862, 65: 0.10009821052684138, 
  67: 0.17861275516015862, 68: 0.10009821052684138, 
  70: 0.17861275516015862, 71: 0.10009821052684138, 
  74: 0.17861275516015862, 75: 0.10009821052684138, 
  78: 0.16527854299384492, 79: 0.04375468127140508,
  81: 0.3008819810648809, 82: 0.15644173978227768, 83: 0.10009821052684138, 
  85: 0.10893501373840861, 86: 0.10009821052684138, 87: 0.10893501373840861, 88: 0.10009821052684138, 
  90: 0.10893501373840861, 91: 0.10009821052684138, 92: 0.10893501373840861, 93: 0.10009821052684138, 
  95: 0.3008819810648809, 96: 0.15644173978227768, 97: 0.10009821052684138, 
  100: 0.16527854299384492, 101: 0.04375468127140508, 
  104: 0.16527854299384492, 105: 0.04375468127140508, 
  107: 0.3008819810648809, 108: 0.15644173978227768, 109: 0.10009821052684138, 
  111: 0.10893501373840861, 112: 0.10009821052684138, 113: 0.10893501373840861, 114: 0.10009821052684138, 
  116: 0.10893501373840861, 117: 0.10009821052684138, 118: 0.10893501373840861, 119: 0.10009821052684138, 
  121: 0.3008819810648809, 122: 0.15644173978227768, 123: 0.10009821052684138, 
  126: 0.16527854299384492, 127: 0.04375468127140508, 
  130: 0.17861275516015862, 131: 0.10009821052684138, 
  133: 0.17861275516015862, 134: 0.10009821052684138, 
  136: 0.17861275516015862, 137: 0.10009821052684138, 
  140: 0.17861275516015862, 141: 0.10009821052684138
}